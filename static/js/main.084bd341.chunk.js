(this["webpackJsonpfqm-execution-demo"]=this["webpackJsonpfqm-execution-demo"]||[]).push([[0],{1009:function(e,t,n){"use strict";n.r(t);var a=n(19),c=n(0),r=n.n(c),s=n(44),l=n.n(s),i=(n(205),n(85)),o=n(66),u=n(1053),j=n(1048),d=n(1059),b=n(1056),h=n(1046),O=n(1047),p=n(1042);function m(e){return Object(a.jsx)(p.a,{component:"fieldset",children:Object(a.jsxs)(h.a,{name:"type",value:e.outputType,onChange:function(t){e.setOutputType(t.target.value)},children:[Object(a.jsx)(O.a,{control:Object(a.jsx)(b.a,{color:"primary"}),value:"rawResults",label:"Raw"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(b.a,{color:"primary"}),value:"detailedResults",label:"Detailed"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(b.a,{color:"primary"}),value:"measureReports",label:"Measure Reports"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(b.a,{color:"primary"}),value:"gapsInCare",label:"Gaps In Care"})]})})}var x=n(141),f=n(1011),g=n(1058);function v(e){var t=function(t){e.setCalculationOptions(Object(i.a)(Object(i.a)({},e.calculationOptions),{},Object(x.a)({},t.target.name,t.target.checked)))};return Object(a.jsxs)(f.a,{children:[Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.includeClauseResults,onChange:t,name:"includeClauseResults",color:"primary"}),label:"Include Clause Results"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.includePrettyResults,onChange:t,name:"includePrettyResults",color:"primary"}),label:"Include Pretty Results"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.includeHighlighting,onChange:t,name:"includeHighlighting",color:"primary"}),label:"Include Highlighting"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.calculateSDEs,onChange:t,name:"calculateSDEs",color:"primary"}),label:"Calculate SDEs"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.calculateHTML,onChange:t,name:"calculateHTML",color:"primary"}),label:"Calculate HTML"})]})}var C=n(842),y=n(56),D=n(1054);function R(e){return Object(a.jsx)(y.a,{utils:C.a,children:Object(a.jsx)(D.a,{value:e.measurementPeriodDate,format:"MM/dd/yyyy",onChange:e.setMeasurementPeriodDate})})}function S(e){return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsxs)(u.a,{item:!0,xs:4,children:[Object(a.jsx)("h3",{children:"Output Type:"}),Object(a.jsx)(m,{setOutputType:e.setOutputType,outputType:e.outputType})]}),Object(a.jsxs)(u.a,{item:!0,xs:4,children:[Object(a.jsx)("h3",{children:"Calculation Options:"}),Object(a.jsx)(v,{setCalculationOptions:e.setCalculationOptions,calculationOptions:e.calculationOptions})]}),Object(a.jsxs)(u.a,{item:!0,xs:4,children:[Object(a.jsx)("h3",{children:"Measurement Start: "}),Object(a.jsx)(R,{setMeasurementPeriodDate:e.setMeasurementPeriodStart,measurementPeriodDate:e.measurementPeriodStart}),Object(a.jsx)("h3",{children:"Measurement End: "}),Object(a.jsx)(R,{setMeasurementPeriodDate:e.setMeasurementPeriodEnd,measurementPeriodDate:e.measurementPeriodEnd})]})]})}var P=n(833),F=n(843),M=n(835);function w(){var e=Object(P.a)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  background-color: #fafafa;\n  color: #7f7f7f;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n"]);return w=function(){return e},e}var N=M.a.div(w(),(function(e){return function(e){return e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isDragActive?"#2196f3":"#eeeeee"}(e)})),T=function(e){var t=e.onDrop,n=Object(F.a)({onDrop:t,accept:".json"}),c=n.getRootProps,r=n.getInputProps,s=n.isDragActive,l=n.isDragAccept,o=n.isDragReject;return Object(a.jsx)(u.a,{item:!0,xs:12,children:Object(a.jsxs)(N,Object(i.a)(Object(i.a)({},c({className:"dropzone",isDragActive:s,isDragAccept:l,isDragReject:o})),{},{children:[Object(a.jsx)("input",Object(i.a)({},r())),Object(a.jsx)("p",{children:"Drag and drop file here, or click to select file"})]}))})},k=n(1055),I=n(1062),E=Object(j.a)((function(e){return Object(d.a)({root:{width:"100%"}})}));function H(e){var t=E();return Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)(p.a,{className:t.root,children:Object(a.jsx)(k.a,{value:e.selectedValue,onChange:e.handleChange,children:e.options.map((function(e){return Object(a.jsx)(I.a,{value:e,children:e},e)}))})})})}var L=n(1013),A=n(197),B=n.n(A),U=Object(j.a)((function(e){return Object(d.a)({root:{color:"#3f51b5"}})}));function J(e){var t=U();return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsxs)(u.a,{item:!0,xs:6,children:[Object(a.jsx)("h2",{children:"Measure Bundle: "}),null!==e.measureFileName&&Object(a.jsx)("h3",{children:"Current Measure Bundle:"}),null!==e.measureFileName&&Object(a.jsxs)(u.a,{container:!0,children:[Object(a.jsxs)("h3",{className:t.root,children:[" ",e.measureFileName]})," ",null!==e.measureFileName&&Object(a.jsx)(L.a,{"aria-label":"delete",onClick:function(){e.setMeasureFileName(null),e.setPatientOptions([]),e.setPatientFileName(null)},children:Object(a.jsx)(B.a,{})})]}),Object(a.jsx)("h4",{children:"Upload From File System:"}),Object(a.jsx)(T,{onDrop:e.onMeasureUpload})," ",Object(a.jsx)("h4",{children:"OR Select From Connectathon Repository:"}),Object(a.jsx)(H,{selectedValue:e.measureFileName||"",options:e.measureOptions,handleChange:e.onMeasureDropdownChange})]}),Object(a.jsxs)(u.a,{item:!0,xs:6,children:[Object(a.jsx)("h2",{children:"Patient Bundle: "}),null!==e.patientFileName&&Object(a.jsx)("h3",{children:"Current Patient Bundle:"}),null!==e.patientFileName&&Object(a.jsxs)(u.a,{container:!0,children:[Object(a.jsxs)("h3",{className:t.root,children:[" ",e.patientFileName]})," ",null!==e.patientFileName&&Object(a.jsx)(L.a,{"aria-label":"delete",onClick:function(){e.setPatientFileName(null)},children:Object(a.jsx)(B.a,{})})]}),Object(a.jsx)("h4",{children:"Upload From File System:"}),Object(a.jsx)(T,{onDrop:e.onPatientUpload})," ",Object(a.jsx)("h4",{children:"OR Select From Connectathon Repository:"}),Object(a.jsx)(H,{selectedValue:e.patientFileName||"",options:e.patientOptions,handleChange:e.onPatientDropdownChange})]})]})}var G=n(1050),V=n(124),q=n(839),z=n.n(q),Q=n(840),W=n.n(Q),K=n(841),X=n.n(K),Y=Object(j.a)((function(e){return Object(d.a)({root:{display:"flex-grow",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},formControl:{margin:e.spacing(1)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},container:{display:"flex-grow"},highlightedMarkup:{"& pre":{whiteSpace:"pre-wrap"}}})}));function Z(){var e=Y(),t=Object(c.useState)(null),n=Object(o.a)(t,2),r=n[0],s=n[1],l=Object(c.useState)(null),j=Object(o.a)(l,2),d=j[0],b=j[1],h=Object(c.useState)(null),O=Object(o.a)(h,2),p=O[0],m=O[1],x=Object(c.useState)([]),f=Object(o.a)(x,2),g=f[0],v=f[1],C=Object(c.useState)(null),y=Object(o.a)(C,2),D=y[0],R=y[1],P=Object(c.useState)(null),F=Object(o.a)(P,2),M=F[0],w=F[1],N=Object(c.useState)([]),T=Object(o.a)(N,2),k=T[0],I=T[1],E=Object(c.useState)([]),H=Object(o.a)(E,2),L=H[0],A=H[1],B=Object(c.useCallback)((function(e){var t=e[0],n=new FileReader;n.onload=function(){s(t.path),R(JSON.parse(n.result))},n.readAsText(t)}),[]),U=Object(c.useCallback)((function(e){var t=e[0],n=new FileReader;n.onload=function(){b(t.path),w(JSON.parse(n.result))},n.readAsText(t)}),[]),q=Object(c.useState)("raw"),Q=Object(o.a)(q,2),K=Q[0],Z=Q[1],$=Object(c.useState)(new Date("1/1/2019")),_=Object(o.a)($,2),ee=_[0],te=_[1],ne=Object(c.useState)(new Date("12/31/2019")),ae=Object(o.a)(ne,2),ce=ae[0],re=ae[1],se=Object(c.useState)({calculateHTML:!1,calculateSDEs:!1,includeClauseResults:!1,includeHighlighting:!1,includePrettyResults:!1}),le=Object(o.a)(se,2),ie=le[0],oe=le[1];return Object(c.useEffect)((function(){fetch("https://api.github.com/repos/dbcg/connectathon/contents/fhir401/bundles/measure").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.name}));I(t)}))}),[]),Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)("h1",{id:"header",children:"FQM Execution Demo"}),Object(a.jsx)(u.a,{container:!0,justify:"space-evenly",children:Object(a.jsx)(u.a,{container:!0,item:!0,xs:11,spacing:2,alignItems:"center",children:Object(a.jsx)(J,{onMeasureUpload:B,onPatientUpload:U,measureFileName:r,setMeasureFileName:s,patientFileName:d,setPatientFileName:b,onMeasureDropdownChange:function(e){var t=e.target.value;fetch("https://raw.githubusercontent.com/DBCG/connectathon/master/fhir401/bundles/measure/"+t+"/"+t+"-bundle.json").then((function(e){return e.json()})).then((function(e){return s(t),R(e),fetch("https://api.github.com/repos/dbcg/connectathon/contents/fhir401/bundles/measure/".concat(t,"/").concat(t,"-files"))})).then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.name})).filter((function(e){return e.startsWith("tests")}));A(t)})).catch((function(e){return console.log("error: ",e)}))},onPatientDropdownChange:function(e){var t=e.target.value;fetch("https://raw.githubusercontent.com/DBCG/connectathon/master/fhir401/bundles/measure/".concat(r,"/").concat(r,"-files/").concat(t)).then((function(e){return e.json()})).then((function(e){w(e),b(t)}))},measureOptions:k,patientOptions:L,setPatientOptions:A})})}),Object(a.jsx)(u.a,{container:!0,spacing:1,justify:"space-evenly",children:Object(a.jsx)(u.a,{container:!0,item:!0,xs:11,spacing:2,children:Object(a.jsx)(S,{setOutputType:Z,outputType:K,setMeasurementPeriodStart:te,measurementPeriodStart:ee,setMeasurementPeriodEnd:re,measurementPeriodEnd:ce,setCalculationOptions:oe,calculationOptions:ie})})}),Object(a.jsxs)(u.a,{container:!0,justify:"flex-end",children:[Object(a.jsx)(G.a,{variant:"contained",onClick:function(){s(null),b(null),R(null),w(null),te(new Date("1/1/2019")),re(new Date("12/31/2019")),oe({calculateHTML:!1,calculateSDEs:!1,includeClauseResults:!1,includeHighlighting:!1,includePrettyResults:!1}),m(null),v([])},children:"Reset"}),Object(a.jsx)(G.a,{variant:"contained",color:"primary",onClick:function(){var e=Object(i.a)({measurementPeriodStart:null===ee||void 0===ee?void 0:ee.toISOString(),measurementPeriodEnd:null===ce||void 0===ce?void 0:ce.toISOString()},ie);if("rawResults"===K)m(V.Calculator.calculateRaw(D,[M],e));else if("detailedResults"===K){var t=V.Calculator.calculate(D,[M],e);m(t);var n=[];if(null!==t&&!0===ie.calculateHTML){var a;for(a in t.results[0].detailedResults)void 0!==t.results[0].detailedResults&&n.push({groupId:t.results[0].detailedResults[a].groupId,html:t.results[0].detailedResults[a].html});v(n)}else v([])}else"measureReports"===K?m(V.Calculator.calculateMeasureReports(D,[M],e)):"gapsInCare"===K&&m(V.Calculator.calculateGapsInCare(D,[M],e))},children:"Calculate"})]}),Object(a.jsxs)(u.a,{container:!0,children:[Object(a.jsx)(u.a,{container:!0,item:!0,xs:6,direction:"row",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Results:"}),p&&Object(a.jsx)(z.a,{src:p,enableClipboard:!0,theme:"shapeshifter:inverted",collapsed:2}),p&&Object(a.jsx)(G.a,{variant:"contained",color:"primary",onClick:function(){X()(JSON.stringify(p),(null===r||void 0===r?void 0:r.includes(".json"))?"results-".concat(r):"results-".concat(r,".json"))},children:"Download"})]})}),Object(a.jsx)(u.a,{container:!0,item:!0,xs:6,direction:"row",children:g&&g.map((function(t){return Object(a.jsxs)("div",{className:e.highlightedMarkup,children:[Object(a.jsx)("h2",{children:"HTML:"}),W()(t.html)]},t.groupId)}))})]})]})})}var $=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1064)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};l.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Z,{})}),document.getElementById("root")),$()},205:function(e,t,n){},948:function(e,t){},950:function(e,t){}},[[1009,1,2]]]);
//# sourceMappingURL=main.084bd341.chunk.js.map