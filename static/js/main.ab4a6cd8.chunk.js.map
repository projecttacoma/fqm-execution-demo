{"version":3,"sources":["state/calculationOptions.ts","state/outputType.ts","state/measurementPeriod.ts","state/bundles.ts","state/dropdowns.ts","components/FileUpload/FileUpload.tsx","components/Dropdowns/FileImportDropdowns.tsx","components/Utils/Loading.tsx","components/Layout/DataImportRow.tsx","components/CalculationOptions/CalculationOptions.tsx","components/CalculationOptions/MeasurementPeriod.tsx","components/CalculationOptions/OutputType.tsx","components/CalculationOptions/ReportType.tsx","components/Layout/OptionsRow.tsx","components/Results/Results.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["calculationOptionsState","atom","key","default","calculateHTML","calculateSDEs","outputTypeState","measurementPeriodState","measurementPeriodStart","Date","measurementPeriodEnd","measureFileState","name","content","patientFileState","measureDropdownSelector","selector","get","a","fetch","response","json","data","map","n","measureDropdownOptionsState","patientDropdownOptionsState","filter","startsWith","Container","styled","div","props","isDragAccept","isDragReject","isDragActive","getColor","MeasureFileUpload","setMeasureFileState","useSetRecoilState","onMeasureUpload","useCallback","files","measureBundleFile","reader","FileReader","onload","path","JSON","parse","result","fromFileUpload","readAsText","useDropzone","onDrop","accept","getRootProps","getInputProps","Grid","item","xs","className","PatientFileUpload","setPatientFileState","onPatientUpload","patientBundleFile","useStyles","makeStyles","theme","createStyles","root","width","MeasureDropdown","classes","measureOptions","useRecoilValue","useRecoilState","measureFile","setMeasureFile","style","FormControl","Select","value","onChange","event","target","then","catch","error","console","log","disabled","option","MenuItem","PatientDropdown","patientFile","setPatientFile","patientOptions","Loading","container","justify","CircularProgress","fileName","color","DataImportRow","Fragment","IconButton","aria-label","onClick","fontSize","fallback","CalculationOptionsButtons","outputType","calculationOptions","setCalculationOptions","handleChange","checked","FormGroup","FormControlLabel","control","Checkbox","reportType","label","MeasurementPeriodDatePicker","measurementPeriod","setMeasurementPeriod","utils","DateFnsUtils","DatePicker","format","OutputTypeButtons","setOutputType","component","RadioGroup","Radio","ReportTypeButtons","OptionsRow","OutputType","CalculationOptions","ReportType","MeasurementPeriod","highlightedMarkup","whiteSpace","Results","results","htmls","direction","fileDownload","stringify","includes","GetApp","src","enableClipboard","collapsed","html","groupId","display","flexDirection","alignItems","margin","spacing","formControl","textField","marginLeft","marginRight","buttons","App","useState","setResults","setHTMLs","calculate","options","toISOString","Calculator","calculateRaw","detailedResults","forEach","dr","push","calculateMeasureReports","mrResults","mrs","Array","isArray","m","id","text","calculateGapsInCare","measureReportEntry","entry","find","e","resource","resourceType","measureReport","Button","variant","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ab4a6cd8.chunk.js","sourcesContent":["import { atom } from 'recoil';\r\nimport { CalculatorTypes } from 'fqm-execution';\r\n\r\nexport const calculationOptionsState = atom<CalculatorTypes.CalculationOptions>({\r\n  key: 'calculationOptions',\r\n  default: {\r\n    calculateHTML: false,\r\n    calculateSDEs: false\r\n  }\r\n});\r\n","import { atom } from 'recoil';\r\n\r\nexport const outputTypeState = atom<string>({\r\n  key: 'outputType',\r\n  default: 'rawResults'\r\n});\r\n","import { atom } from 'recoil';\r\n\r\nexport interface MeasurementPeriodState {\r\n  measurementPeriodStart: Date | null;\r\n  measurementPeriodEnd: Date | null;\r\n}\r\n\r\nexport const measurementPeriodState = atom<MeasurementPeriodState>({\r\n  key: 'measurementPeriod',\r\n  default: {\r\n    measurementPeriodStart: new Date('1/1/2019'),\r\n    measurementPeriodEnd: new Date('12/31/2019')\r\n  }\r\n});\r\n","import { R4 } from '@ahryman40k/ts-fhir-types';\r\nimport { atom } from 'recoil';\r\n\r\nexport interface FileUploadState {\r\n  name: string | null;\r\n  content: R4.IBundle | null;\r\n  fromFileUpload?: boolean;\r\n}\r\n\r\nexport const measureFileState = atom<FileUploadState>({\r\n  key: 'measureFile',\r\n  default: {\r\n    name: null,\r\n    content: null\r\n  }\r\n});\r\n\r\nexport const patientFileState = atom<FileUploadState>({\r\n  key: 'patientFile',\r\n  default: {\r\n    name: null,\r\n    content: null\r\n  }\r\n});\r\n","import { atom, selector } from 'recoil';\r\nimport { measureFileState } from './bundles';\r\n\r\nconst measureDropdownSelector = selector({\r\n  key: 'measureDropdownSelector',\r\n  get: async () => {\r\n    try {\r\n      const response = await fetch('https://api.github.com/repos/dbcg/connectathon/contents/fhir401/bundles/measure');\r\n      const data = await response.json();\r\n\r\n      return data.map((n: { name: string }) => {\r\n        return n.name;\r\n      });\r\n    } catch (e) {\r\n      return [];\r\n    }\r\n  }\r\n});\r\n\r\nexport const measureDropdownOptionsState = atom<string[]>({\r\n  key: 'measureDropdownOptions',\r\n  default: measureDropdownSelector\r\n});\r\n\r\nexport const patientDropdownOptionsState = selector({\r\n  key: 'patientDropdownOptions',\r\n  get: async ({ get }) => {\r\n    const { name } = get(measureFileState);\r\n\r\n    if (name) {\r\n      try {\r\n        const response = await fetch(\r\n          `https://api.github.com/repos/dbcg/connectathon/contents/fhir401/bundles/measure/${name}/${name}-files`\r\n        );\r\n        const data = (await response.json()) as { name: string }[];\r\n        return data\r\n          .map(n => {\r\n            return n.name;\r\n          })\r\n          .filter(n => {\r\n            return n.startsWith('tests');\r\n          });\r\n      } catch (e) {\r\n        return [];\r\n      }\r\n    }\r\n\r\n    return [];\r\n  }\r\n});\r\n","import { R4 } from '@ahryman40k/ts-fhir-types';\r\nimport { Grid } from '@material-ui/core';\r\nimport React, { useCallback } from 'react';\r\nimport { DropzoneRootProps, useDropzone } from 'react-dropzone';\r\nimport { useSetRecoilState } from 'recoil';\r\nimport styled from 'styled-components';\r\nimport { measureFileState, patientFileState } from '../../state';\r\n\r\nconst getColor = (props: DropzoneRootProps) => {\r\n  if (props.isDragAccept) {\r\n    return '#00e676';\r\n  }\r\n  if (props.isDragReject) {\r\n    return '#ff1744';\r\n  }\r\n  if (props.isDragActive) {\r\n    return '#2196f3';\r\n  }\r\n  return '#eeeeee';\r\n};\r\n\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 20px;\r\n  border-width: 2px;\r\n  border-radius: 2px;\r\n  border-color: ${(props: DropzoneRootProps) => getColor(props)};\r\n  border-style: dashed;\r\n  background-color: #fafafa;\r\n  color: #7f7f7f;\r\n  outline: none;\r\n  transition: border 0.24s ease-in-out;\r\n`;\r\n\r\nexport const MeasureFileUpload = () => {\r\n  const setMeasureFileState = useSetRecoilState(measureFileState);\r\n\r\n  const onMeasureUpload = useCallback(\r\n    files => {\r\n      const measureBundleFile = files[0];\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        setMeasureFileState({\r\n          name: measureBundleFile.path,\r\n          content: JSON.parse(reader.result as string) as R4.IBundle,\r\n          fromFileUpload: true\r\n        });\r\n      };\r\n      reader.readAsText(measureBundleFile);\r\n    },\r\n    [setMeasureFileState]\r\n  );\r\n\r\n  const { getRootProps, getInputProps, isDragActive, isDragAccept, isDragReject } = useDropzone({\r\n    onDrop: onMeasureUpload,\r\n    accept: '.json'\r\n  });\r\n\r\n  return (\r\n    <Grid item xs={12}>\r\n      <Container {...getRootProps({ className: 'dropzone', isDragActive, isDragAccept, isDragReject })}>\r\n        <input {...getInputProps()} />\r\n        <p>Drag and drop file here, or click to select file</p>\r\n      </Container>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport const PatientFileUpload = () => {\r\n  const setPatientFileState = useSetRecoilState(patientFileState);\r\n\r\n  const onPatientUpload = useCallback(\r\n    files => {\r\n      const patientBundleFile = files[0];\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        setPatientFileState({\r\n          name: patientBundleFile.path,\r\n          content: JSON.parse(reader.result as string) as R4.IBundle,\r\n          fromFileUpload: true\r\n        });\r\n      };\r\n      reader.readAsText(patientBundleFile);\r\n    },\r\n    [setPatientFileState]\r\n  );\r\n\r\n  const { getRootProps, getInputProps, isDragActive, isDragAccept, isDragReject } = useDropzone({\r\n    onDrop: onPatientUpload,\r\n    accept: '.json'\r\n  });\r\n\r\n  return (\r\n    <Grid item xs={12}>\r\n      <Container {...getRootProps({ className: 'dropzone', isDragActive, isDragAccept, isDragReject })}>\r\n        <input {...getInputProps()} />\r\n        <p>Drag and drop file here, or click to select file</p>\r\n      </Container>\r\n    </Grid>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core';\r\nimport { useRecoilState, useRecoilValue } from 'recoil';\r\nimport { R4 } from '@ahryman40k/ts-fhir-types';\r\nimport {\r\n  measureDropdownOptionsState,\r\n  measureFileState,\r\n  patientDropdownOptionsState,\r\n  patientFileState\r\n} from '../../state';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: '100%'\r\n    }\r\n  })\r\n);\r\n\r\nexport function MeasureDropdown() {\r\n  const classes = useStyles();\r\n  const measureOptions = useRecoilValue(measureDropdownOptionsState);\r\n  const [measureFile, setMeasureFile] = useRecoilState(measureFileState);\r\n\r\n  const onMeasureDropdownChange = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n    const name = event.target.value as string;\r\n\r\n    fetch(\r\n      `https://raw.githubusercontent.com/DBCG/connectathon/master/fhir401/bundles/measure/` +\r\n        name +\r\n        `/` +\r\n        name +\r\n        `-bundle.json`\r\n    )\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setMeasureFile({\r\n          name,\r\n          content: data as R4.IBundle,\r\n          fromFileUpload: false\r\n        });\r\n      })\r\n      .catch(error => console.log('error: ', error));\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: '100%' }}>\r\n      <FormControl className={classes.root}>\r\n        <Select\r\n          value={measureFile.name || ''}\r\n          onChange={onMeasureDropdownChange}\r\n          disabled={measureFile.content !== null && measureFile.fromFileUpload === true}\r\n        >\r\n          {measureOptions.map(option => (\r\n            <MenuItem key={option} value={option}>\r\n              {option}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function PatientDropdown() {\r\n  const classes = useStyles();\r\n\r\n  const [patientFile, setPatientFile] = useRecoilState(patientFileState);\r\n  const measureFile = useRecoilValue(measureFileState);\r\n  const patientOptions = useRecoilValue(patientDropdownOptionsState);\r\n\r\n  const onPatientDropdownChange = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n    const name = event.target.value as string;\r\n    fetch(\r\n      `https://raw.githubusercontent.com/DBCG/connectathon/master/fhir401/bundles/measure/${measureFile.name}/${measureFile.name}-files/${name}`\r\n    )\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        setPatientFile({\r\n          name,\r\n          content: data as R4.IBundle,\r\n          fromFileUpload: false\r\n        });\r\n      })\r\n      .catch(error => console.log('error: ', error));\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: '100%' }}>\r\n      <FormControl className={classes.root}>\r\n        <Select\r\n          value={patientFile.name || ''}\r\n          onChange={onPatientDropdownChange}\r\n          disabled={patientFile.content !== null && patientFile.fromFileUpload === true}\r\n        >\r\n          {patientOptions.map(option => (\r\n            <MenuItem key={option} value={option}>\r\n              {option}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { CircularProgress, Grid } from '@material-ui/core';\r\n\r\nconst Loading = () => (\r\n  <Grid container justify=\"center\">\r\n    <CircularProgress />\r\n  </Grid>\r\n);\r\n\r\nexport default Loading;\r\n","import React, { Suspense } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { MeasureFileUpload, PatientFileUpload } from '../FileUpload';\r\nimport { MeasureDropdown, PatientDropdown } from '../Dropdowns';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core';\r\nimport { useRecoilState } from 'recoil';\r\nimport { measureFileState, patientFileState } from '../../state';\r\nimport { Loading } from '../Utils';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    fileName: {\r\n      color: '#009688'\r\n    }\r\n  })\r\n);\r\n\r\nexport default function DataImportRow() {\r\n  const classes = useStyles();\r\n\r\n  const [measureFile, setMeasureFile] = useRecoilState(measureFileState);\r\n  const [patientFile, setPatientFile] = useRecoilState(patientFileState);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Grid item xs={6}>\r\n        <h2>Measure Bundle: </h2>\r\n        <Grid container>\r\n          {measureFile.name !== null ? (\r\n            <>\r\n              <h3 className={classes.fileName}> {measureFile.name}</h3>\r\n              <IconButton\r\n                aria-label=\"delete\"\r\n                onClick={() => {\r\n                  setMeasureFile({\r\n                    name: null,\r\n                    content: null\r\n                  });\r\n                  setPatientFile({\r\n                    name: null,\r\n                    content: null\r\n                  });\r\n                }}\r\n              >\r\n                <DeleteIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </>\r\n          ) : (\r\n            <h3 className={classes.fileName}>None Selected</h3>\r\n          )}\r\n        </Grid>\r\n        <h4>Upload From File System:</h4>\r\n        <MeasureFileUpload />\r\n        <h4>OR Select From Connectathon Repository:</h4>\r\n        <Suspense fallback={<Loading />}>\r\n          <MeasureDropdown />\r\n        </Suspense>\r\n      </Grid>\r\n      <Grid item xs={6}>\r\n        <h2>Patient Bundle: </h2>\r\n        <Grid container>\r\n          {patientFile.name !== null ? (\r\n            <>\r\n              <h3 className={classes.fileName}>{patientFile.name}</h3>\r\n              <IconButton\r\n                aria-label=\"delete\"\r\n                onClick={() => {\r\n                  setPatientFile({\r\n                    name: null,\r\n                    content: null\r\n                  });\r\n                }}\r\n              >\r\n                <DeleteIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </>\r\n          ) : (\r\n            <h3 className={classes.fileName}>None Selected</h3>\r\n          )}\r\n        </Grid>\r\n        <h4>Upload From File System:</h4>\r\n        <PatientFileUpload />\r\n        <h4>OR Select From Connectathon Repository:</h4>\r\n        <Suspense fallback={<Loading />}>\r\n          <PatientDropdown />\r\n        </Suspense>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { useRecoilState, useRecoilValue } from 'recoil';\r\nimport { calculationOptionsState, outputTypeState } from '../../state';\r\n\r\nfunction CalculationOptionsButtons() {\r\n  const outputType = useRecoilValue(outputTypeState);\r\n  const [calculationOptions, setCalculationOptions] = useRecoilState(calculationOptionsState);\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setCalculationOptions({\r\n      ...calculationOptions,\r\n      [event.target.name]: event.target.checked\r\n    });\r\n  };\r\n\r\n  return (\r\n    <FormGroup>\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={outputType !== 'rawResults' && calculationOptions.calculateSDEs}\r\n            onChange={handleChange}\r\n            disabled={\r\n              outputType === 'rawResults' ||\r\n              (outputType === 'measureReports' && calculationOptions.reportType === 'summary')\r\n            }\r\n            name=\"calculateSDEs\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label=\"Calculate SDEs\"\r\n      />\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={outputType !== 'rawResults' && calculationOptions.calculateHTML}\r\n            onChange={handleChange}\r\n            disabled={\r\n              outputType === 'rawResults' ||\r\n              (outputType === 'measureReports' && calculationOptions.reportType === 'summary')\r\n            }\r\n            name=\"calculateHTML\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label=\"Calculate HTML\"\r\n      />\r\n    </FormGroup>\r\n  );\r\n}\r\n\r\nexport default CalculationOptionsButtons;\r\n","import React from 'react';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport { useRecoilState } from 'recoil';\r\nimport { measurementPeriodState } from '../../state';\r\n\r\nfunction MeasurementPeriodDatePicker() {\r\n  const [measurementPeriod, setMeasurementPeriod] = useRecoilState(measurementPeriodState);\r\n\r\n  const setStart = (value: Date | null) => {\r\n    setMeasurementPeriod({\r\n      ...measurementPeriod,\r\n      measurementPeriodStart: value\r\n    });\r\n  };\r\n\r\n  const setEnd = (value: Date | null) => {\r\n    setMeasurementPeriod({\r\n      ...measurementPeriod,\r\n      measurementPeriodEnd: value\r\n    });\r\n  };\r\n\r\n  return (\r\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n      <h3>Measurement Start: </h3>\r\n      <DatePicker value={measurementPeriod.measurementPeriodStart} format=\"MM/dd/yyyy\" onChange={setStart} />\r\n      <h3>Measurement End: </h3>\r\n      <DatePicker value={measurementPeriod.measurementPeriodEnd} format=\"MM/dd/yyyy\" onChange={setEnd} />\r\n    </MuiPickersUtilsProvider>\r\n  );\r\n}\r\n\r\nexport default MeasurementPeriodDatePicker;\r\n","import React from 'react';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { useRecoilState } from 'recoil';\r\nimport { outputTypeState } from '../../state';\r\n\r\nfunction OutputTypeButtons() {\r\n  const [outputType, setOutputType] = useRecoilState(outputTypeState);\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = (event.target as HTMLInputElement).value;\r\n    setOutputType(value);\r\n  };\r\n\r\n  return (\r\n    <FormControl component=\"fieldset\">\r\n      <RadioGroup name=\"type\" value={outputType} onChange={handleChange}>\r\n        <FormControlLabel control={<Radio color=\"primary\" />} value=\"rawResults\" label=\"Raw\" />\r\n        <FormControlLabel control={<Radio color=\"primary\" />} value=\"detailedResults\" label=\"Detailed\" />\r\n        <FormControlLabel control={<Radio color=\"primary\" />} value=\"measureReports\" label=\"Measure Reports\" />\r\n        <FormControlLabel control={<Radio color=\"primary\" />} value=\"gapsInCare\" label=\"Gaps In Care\" />\r\n      </RadioGroup>\r\n    </FormControl>\r\n  );\r\n}\r\n\r\nexport default OutputTypeButtons;\r\n","import React from 'react';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { useRecoilState, useRecoilValue } from 'recoil';\r\nimport { calculationOptionsState, outputTypeState } from '../../state';\r\n\r\nfunction ReportTypeButtons() {\r\n  const outputType = useRecoilValue(outputTypeState);\r\n  const [calculationOptions, setCalculationOptions] = useRecoilState(calculationOptionsState);\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = (event.target as HTMLInputElement).value;\r\n    setCalculationOptions({\r\n      ...calculationOptions,\r\n      reportType: value as 'subject-list' | 'summary' | 'individual' | undefined\r\n    });\r\n  };\r\n\r\n  return (\r\n    <FormControl component=\"fieldset\">\r\n      <RadioGroup name=\"type\" value={calculationOptions.reportType} onChange={handleChange}>\r\n        <FormControlLabel\r\n          control={<Radio color=\"primary\" />}\r\n          value=\"individual\"\r\n          label=\"Individual\"\r\n          disabled={outputType !== 'measureReports' && outputType !== 'gapsInCare'}\r\n        />\r\n        <FormControlLabel\r\n          control={<Radio color=\"primary\" />}\r\n          value=\"summary\"\r\n          label=\"Summary\"\r\n          disabled={outputType !== 'measureReports' && outputType !== 'gapsInCare'}\r\n        />\r\n      </RadioGroup>\r\n    </FormControl>\r\n  );\r\n}\r\n\r\nexport default ReportTypeButtons;\r\n","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {\r\n  CalculationOptionsButtons,\r\n  MeasurementPeriodDatePicker,\r\n  OutputTypeButtons,\r\n  ReportTypeButtons\r\n} from '../CalculationOptions';\r\n\r\nexport default function OptionsRow() {\r\n  return (\r\n    <React.Fragment>\r\n      <Grid item xs={3}>\r\n        <h3>Output Type:</h3>\r\n        <OutputTypeButtons />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <h3>Calculation Options:</h3>\r\n        <CalculationOptionsButtons />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <h3>Report Type:</h3>\r\n        <ReportTypeButtons />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <MeasurementPeriodDatePicker />\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import { makeStyles, Grid, IconButton } from '@material-ui/core';\r\nimport ReactJson from 'react-json-view';\r\nimport parse from 'html-react-parser';\r\nimport fileDownload from 'js-file-download';\r\nimport React from 'react';\r\nimport { FileUploadState } from '../../state';\r\nimport { GetApp } from '@material-ui/icons';\r\nimport { HTML } from '../../App';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  highlightedMarkup: {\r\n    '& pre': {\r\n      whiteSpace: 'pre-wrap'\r\n    }\r\n  }\r\n}));\r\n\r\ninterface Props {\r\n  results: any;\r\n  measureFile: FileUploadState;\r\n  htmls: HTML[];\r\n}\r\n\r\nconst Results: React.FC<Props> = ({ results, measureFile, htmls }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid container>\r\n      <Grid container item xs={6} direction=\"column\">\r\n        <Grid container direction=\"row\">\r\n          <h2>Results:</h2>\r\n          {results && (\r\n            <IconButton\r\n              onClick={() => {\r\n                fileDownload(\r\n                  JSON.stringify(results, null, 2),\r\n                  measureFile.name?.includes('.json')\r\n                    ? `results-${measureFile.name}`\r\n                    : `results-${measureFile.name}.json`\r\n                );\r\n              }}\r\n            >\r\n              <GetApp fontSize=\"small\" />\r\n            </IconButton>\r\n          )}\r\n        </Grid>\r\n        {results && <ReactJson src={results} enableClipboard={true} theme=\"shapeshifter:inverted\" collapsed={2} />}\r\n      </Grid>\r\n      <Grid container item xs={6}>\r\n        {htmls &&\r\n          htmls.map(html => {\r\n            return (\r\n              <div key={html.groupId} className={classes.highlightedMarkup}>\r\n                <h2>HTML:</h2>\r\n                {parse(html.html)}\r\n              </div>\r\n            );\r\n          })}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Results;\r\n","import React, { useState } from 'react';\r\nimport 'date-fns';\r\nimport './index.css';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\r\nimport { OptionsRow, DataImportRow } from './components/Layout';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Calculator, CalculatorTypes } from 'fqm-execution';\r\nimport { R4 } from '@ahryman40k/ts-fhir-types';\r\nimport { useRecoilState, useRecoilValue } from 'recoil';\r\nimport {\r\n  calculationOptionsState,\r\n  measureFileState,\r\n  measurementPeriodState,\r\n  outputTypeState,\r\n  patientFileState\r\n} from './state';\r\nimport Results from './components/Results';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: 'flex-grow',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n\r\n      '& > *': {\r\n        margin: theme.spacing(1)\r\n      }\r\n    },\r\n    formControl: {\r\n      margin: theme.spacing(1)\r\n    },\r\n    textField: {\r\n      marginLeft: theme.spacing(1),\r\n      marginRight: theme.spacing(1),\r\n      width: 200\r\n    },\r\n    container: {\r\n      display: 'flex-grow'\r\n    },\r\n    buttons: {\r\n      margin: '4px'\r\n    }\r\n  })\r\n);\r\n\r\nexport interface HTML {\r\n  groupId: string;\r\n  html: string;\r\n}\r\n\r\nexport default function App() {\r\n  const classes = useStyles();\r\n\r\n  const [results, setResults] = useState<any>(null);\r\n  const [htmls, setHTMLs] = useState<HTML[]>([]);\r\n\r\n  const [measureFile, setMeasureFile] = useRecoilState(measureFileState);\r\n  const [patientFile, setPatientFile] = useRecoilState(patientFileState);\r\n  const [calculationOptions, setCalculationOptions] = useRecoilState(calculationOptionsState);\r\n  const outputType = useRecoilValue(outputTypeState);\r\n  const measurementPeriod = useRecoilValue(measurementPeriodState);\r\n\r\n  const calculate = async () => {\r\n    const options: CalculatorTypes.CalculationOptions = {\r\n      ...calculationOptions,\r\n      measurementPeriodStart: measurementPeriod.measurementPeriodStart?.toISOString(),\r\n      measurementPeriodEnd: measurementPeriod.measurementPeriodEnd?.toISOString()\r\n    };\r\n\r\n    // Clear existing results before new calculation\r\n    setResults(null);\r\n    setHTMLs([]);\r\n\r\n    if (outputType === 'rawResults') {\r\n      if (measureFile.content && patientFile.content) {\r\n        const { results } = await Calculator.calculateRaw(measureFile.content, [patientFile.content], options);\r\n        setResults(results);\r\n      }\r\n    } else if (outputType === 'detailedResults') {\r\n      if (measureFile.content && patientFile.content) {\r\n        const { results } = await Calculator.calculate(measureFile.content, [patientFile.content], options);\r\n        setResults(results);\r\n        let html: HTML[] = [];\r\n        if (results !== null && calculationOptions.calculateHTML === true) {\r\n          results[0].detailedResults?.forEach(dr => {\r\n            html.push({\r\n              groupId: dr.groupId,\r\n              html: dr.html || ''\r\n            });\r\n          });\r\n          setHTMLs(html);\r\n        }\r\n      }\r\n    } else if (outputType === 'measureReports') {\r\n      if (measureFile.content && patientFile.content) {\r\n        const mrResults = await Calculator.calculateMeasureReports(measureFile.content, [patientFile.content], options);\r\n        const mrs = mrResults.results;\r\n\r\n        if (calculationOptions.calculateHTML) {\r\n          const htmls: HTML[] = (Array.isArray(mrs) ? mrs : [mrs]).map(m => ({\r\n            groupId: m.id || '',\r\n            html: m.text?.div || ''\r\n          }));\r\n          setHTMLs(htmls);\r\n        }\r\n\r\n        setResults(mrs);\r\n      }\r\n    } else if (outputType === 'gapsInCare') {\r\n      if (measureFile.content && patientFile.content) {\r\n        const { results } = await Calculator.calculateGapsInCare(measureFile.content, [patientFile.content], options);\r\n\r\n        if (calculationOptions.calculateHTML) {\r\n          const measureReportEntry = results.entry?.find(e => e.resource?.resourceType === 'MeasureReport');\r\n\r\n          if (measureReportEntry?.resource) {\r\n            const measureReport = measureReportEntry.resource as R4.IMeasureReport;\r\n            setHTMLs([\r\n              {\r\n                groupId: measureReport.id || '',\r\n                html: measureReport.text?.div || ''\r\n              }\r\n            ]);\r\n          }\r\n        }\r\n\r\n        setResults(results);\r\n      }\r\n    }\r\n  };\r\n\r\n  const reset = () => {\r\n    setMeasureFile({\r\n      name: null,\r\n      content: null\r\n    });\r\n    setPatientFile({\r\n      name: null,\r\n      content: null\r\n    });\r\n    setCalculationOptions({\r\n      calculateHTML: false,\r\n      calculateSDEs: false\r\n    });\r\n    setResults(null);\r\n    setHTMLs([]);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid>\r\n        <h1 id=\"header\">FQM Execution Demo</h1>\r\n        <Grid container justify=\"space-evenly\">\r\n          <Grid container item xs={11} spacing={2}>\r\n            <DataImportRow />\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container spacing={1} justify=\"space-evenly\">\r\n          <Grid container item xs={11} spacing={2}>\r\n            <OptionsRow />\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container justify=\"center\" direction=\"row\">\r\n          <Button variant=\"contained\" onClick={reset} className={classes.buttons}>\r\n            Reset\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={calculate}\r\n            className={classes.buttons}\r\n            disabled={measureFile.content === null || patientFile.content === null}\r\n          >\r\n            Calculate\r\n          </Button>\r\n        </Grid>\r\n        <Results results={results} measureFile={measureFile} htmls={htmls} />\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { RecoilRoot } from 'recoil';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <RecoilRoot>\r\n      <App />\r\n    </RecoilRoot>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}