(this["webpackJsonpfqm-execution-demo"]=this["webpackJsonpfqm-execution-demo"]||[]).push([[0],{1009:function(e,t,n){"use strict";n.r(t);var a=n(18),c=n(0),r=n.n(c),s=n(44),i=n.n(s),o=(n(205),n(85)),l=n(57),u=n(1053),j=n(1048),d=n(1059),h=n(1056),b=n(1046),O=n(1047),p=n(1042);function m(e){return Object(a.jsx)(p.a,{component:"fieldset",children:Object(a.jsxs)(b.a,{name:"type",value:e.outputType,onChange:function(t){e.setOutputType(t.target.value)},children:[Object(a.jsx)(O.a,{control:Object(a.jsx)(h.a,{color:"primary"}),value:"rawResults",label:"Raw"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(h.a,{color:"primary"}),value:"detailedResults",label:"Detailed"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(h.a,{color:"primary"}),value:"measureReports",label:"Measure Reports"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(h.a,{color:"primary"}),value:"gapsInCare",label:"Gaps In Care"})]})})}var f=n(141),x=n(1011),g=n(1058);function v(e){var t=function(t){e.setCalculationOptions(Object(o.a)(Object(o.a)({},e.calculationOptions),{},Object(f.a)({},t.target.name,t.target.checked)))};return Object(a.jsxs)(x.a,{children:[Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.includeClauseResults,onChange:t,name:"includeClauseResults",color:"primary"}),label:"Include Clause Results"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.includePrettyResults,onChange:t,name:"includePrettyResults",color:"primary"}),label:"Include Pretty Results"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.includeHighlighting,onChange:t,name:"includeHighlighting",color:"primary"}),label:"Include Highlighting"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.calculateSDEs,onChange:t,name:"calculateSDEs",color:"primary"}),label:"Calculate SDEs"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.calculateHTML,onChange:t,name:"calculateHTML",color:"primary"}),label:"Calculate HTML"})]})}var C=n(842),w=n(56),y=n(1054);function D(e){return Object(a.jsx)(w.a,{utils:C.a,children:Object(a.jsx)(y.a,{value:e.measurementPeriodDate,format:"MM/dd/yyyy",onChange:e.setMeasurementPeriodDate})})}function M(e){return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsxs)(u.a,{item:!0,xs:4,children:[Object(a.jsx)("h3",{children:"Output Type:"}),Object(a.jsx)(m,{setOutputType:e.setOutputType,outputType:e.outputType})]}),Object(a.jsxs)(u.a,{item:!0,xs:4,children:[Object(a.jsx)("h3",{children:"Calculation Options:"}),Object(a.jsx)(v,{setCalculationOptions:e.setCalculationOptions,calculationOptions:e.calculationOptions})]}),Object(a.jsxs)(u.a,{item:!0,xs:4,children:[Object(a.jsx)("h3",{children:"Measurement Start: "}),Object(a.jsx)(D,{setMeasurementPeriodDate:e.setMeasurementPeriodStart,measurementPeriodDate:e.measurementPeriodStart}),Object(a.jsx)("h3",{children:"Measurement End: "}),Object(a.jsx)(D,{setMeasurementPeriodDate:e.setMeasurementPeriodEnd,measurementPeriodDate:e.measurementPeriodEnd})]})]})}var R=n(833),P=n(843),S=n(835);function F(){var e=Object(R.a)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  background-color: #fafafa;\n  color: #7f7f7f;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n"]);return F=function(){return e},e}var N=S.a.div(F(),(function(e){return function(e){return e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isDragActive?"#2196f3":"#eeeeee"}(e)})),k=function(e){var t=e.onDrop,n=Object(P.a)({onDrop:t,accept:".json"}),c=n.getRootProps,r=n.getInputProps,s=n.isDragActive,i=n.isDragAccept,l=n.isDragReject;return Object(a.jsx)(u.a,{item:!0,xs:12,children:Object(a.jsxs)(N,Object(o.a)(Object(o.a)({},c({className:"dropzone",isDragActive:s,isDragAccept:i,isDragReject:l})),{},{children:[Object(a.jsx)("input",Object(o.a)({},r())),Object(a.jsx)("p",{children:"Drag and drop file here, or click to select file"})]}))})},E=n(1055),T=n(1062),I=Object(j.a)((function(e){return Object(d.a)({root:{width:"100%"}})}));function H(e){var t=I();return Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)(p.a,{className:t.root,children:Object(a.jsx)(E.a,{value:e.selectedValue,onChange:e.handleChange,children:e.options.map((function(e){return Object(a.jsx)(T.a,{value:e,children:e},e)}))})})})}var L=n(1013),q=n(197),A=n.n(q),G=n(1012),Q=Object(j.a)((function(e){return Object(d.a)({root:{color:"#3f51b5"}})}));function B(e){var t=Q();return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsxs)(u.a,{item:!0,xs:6,children:[Object(a.jsx)("h2",{children:"Measure Bundle: "}),null!==e.measureFileName&&Object(a.jsx)("h3",{children:"Current Measure Bundle:"}),null!==e.measureFileName&&Object(a.jsxs)(u.a,{container:!0,children:[Object(a.jsxs)("h3",{className:t.root,children:[" ",e.measureFileName]}),null!==e.measureFileName&&Object(a.jsx)(L.a,{"aria-label":"delete",onClick:function(){e.setMeasureFileName(null),e.setPatientOptions([]),e.setECQMPatientOptions([]),e.setPatientFileName(null)},children:Object(a.jsx)(A.a,{})})]}),Object(a.jsx)("h4",{children:"Upload From File System:"}),Object(a.jsx)(k,{onDrop:e.onMeasureUpload}),e.showDropdowns?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h4",{children:"OR Select From Connectathon Repository:"}),Object(a.jsx)(H,{selectedValue:e.measureFileName||"",options:e.measureOptions,handleChange:e.onMeasureDropdownChange}),Object(a.jsx)("h4",{children:"OR Select From eCQM Measure Content Repository:"}),Object(a.jsx)(H,{selectedValue:e.measureFileName||"",options:e.ecqmMeasureOptions,handleChange:e.onECQMMeasureDropdownChange})]}):Object(a.jsx)(G.a,{variant:"caption",children:"Loading bundles from Github is temporarily disabled"})]}),Object(a.jsxs)(u.a,{item:!0,xs:6,children:[Object(a.jsx)("h2",{children:"Patient Bundle: "}),null!==e.patientFileName&&Object(a.jsx)("h3",{children:"Current Patient Bundle:"}),null!==e.patientFileName&&Object(a.jsxs)(u.a,{container:!0,children:[Object(a.jsxs)("h3",{className:t.root,children:[" ",e.patientFileName]})," ",null!==e.patientFileName&&Object(a.jsx)(L.a,{"aria-label":"delete",onClick:function(){e.setPatientFileName(null)},children:Object(a.jsx)(A.a,{})})]}),Object(a.jsx)("h4",{children:"Upload From File System:"}),Object(a.jsx)(k,{onDrop:e.onPatientUpload}),e.showDropdowns?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h4",{children:"OR Select From Connectathon Repository:"}),Object(a.jsx)(H,{selectedValue:e.patientFileName||"",options:e.patientOptions,handleChange:e.onPatientDropdownChange}),Object(a.jsx)("h4",{children:"OR Select From eCQM Measure Content Repository:"}),Object(a.jsx)(H,{selectedValue:e.patientFileName||"",options:e.ecqmPatientOptions,handleChange:e.onECQMPatientDropdownChange})]}):Object(a.jsx)(G.a,{variant:"caption",children:"Loading bundles from Github is temporarily disabled"})]})]})}var U=n(1050),J=n(124),V=n(839),W=n.n(V),X=n(840),z=n.n(X),K=n(841),Y=n.n(K),Z=Object(j.a)((function(e){return Object(d.a)({root:{display:"flex-grow",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},formControl:{margin:e.spacing(1)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},container:{display:"flex-grow"},highlightedMarkup:{"& pre":{whiteSpace:"pre-wrap"}}})}));function $(){var e=Z(),t=Object(c.useState)(null),n=Object(l.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(null),j=Object(l.a)(i,2),d=j[0],h=j[1],b=Object(c.useState)(null),O=Object(l.a)(b,2),p=O[0],m=O[1],f=Object(c.useState)([]),x=Object(l.a)(f,2),g=x[0],v=x[1],C=Object(c.useState)(null),w=Object(l.a)(C,2),y=w[0],D=w[1],R=Object(c.useState)(null),P=Object(l.a)(R,2),S=P[0],F=P[1],N=Object(c.useState)([]),k=Object(l.a)(N,2),E=k[0],T=k[1],I=Object(c.useState)([]),H=Object(l.a)(I,2),L=H[0],q=H[1],A=Object(c.useState)([]),G=Object(l.a)(A,2),Q=G[0],V=G[1],X=Object(c.useState)([]),K=Object(l.a)(X,2),$=K[0],_=K[1],ee=Object(c.useState)(!0),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],ce=Object(c.useCallback)((function(e){var t=e[0],n=new FileReader;n.onload=function(){s(t.path),D(JSON.parse(n.result))},n.readAsText(t)}),[]),re=Object(c.useCallback)((function(e){var t=e[0],n=new FileReader;n.onload=function(){h(t.path),F(JSON.parse(n.result))},n.readAsText(t)}),[]),se=Object(c.useState)("raw"),ie=Object(l.a)(se,2),oe=ie[0],le=ie[1],ue=Object(c.useState)(new Date("1/1/2019")),je=Object(l.a)(ue,2),de=je[0],he=je[1],be=Object(c.useState)(new Date("12/31/2019")),Oe=Object(l.a)(be,2),pe=Oe[0],me=Oe[1],fe=Object(c.useState)({calculateHTML:!1,calculateSDEs:!1,includeClauseResults:!1,includeHighlighting:!1,includePrettyResults:!1}),xe=Object(l.a)(fe,2),ge=xe[0],ve=xe[1];return Object(c.useEffect)((function(){fetch("https://api.github.com/repos/dbcg/connectathon/contents/fhir401/bundles/measure").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.name}));return T(t),fetch("https://api.github.com/repos/cqframework/ecqm-content-r4/contents/bundles/measure")})).then((function(e){if(403===e.status){if(null!=e.headers.get("X-RateLimit-Reset")){var t=new Date(1e3*parseInt(e.headers.get("X-RateLimit-Reset")));throw new Error("GitHub Rate Limited until: ".concat(t))}throw new Error("Auth error with GitHub.")}return e.json()})).then((function(e){var t=e.map((function(e){return e.name}));q(t)})).catch((function(e){console.error("Error fetching from GitHub",e),ae(!1)}))}),[]),Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)("h1",{id:"header",children:"FQM Execution Demo"}),Object(a.jsx)(u.a,{container:!0,justify:"space-evenly",children:Object(a.jsx)(u.a,{container:!0,item:!0,xs:11,spacing:2,alignItems:"center",children:Object(a.jsx)(B,{onMeasureUpload:ce,onPatientUpload:re,measureFileName:r,setMeasureFileName:s,patientFileName:d,setPatientFileName:h,onMeasureDropdownChange:function(e){var t=e.target.value;fetch("https://raw.githubusercontent.com/DBCG/connectathon/master/fhir401/bundles/measure/"+t+"/"+t+"-bundle.json").then((function(e){return e.json()})).then((function(e){return s(t),D(e),fetch("https://api.github.com/repos/dbcg/connectathon/contents/fhir401/bundles/measure/".concat(t,"/").concat(t,"-files"))})).then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.name})).filter((function(e){return e.startsWith("tests")}));V(t),_([])})).catch((function(e){return console.log("error: ",e)}))},onECQMMeasureDropdownChange:function(e){var t=e.target.value;fetch("https://raw.githubusercontent.com/cqframework/ecqm-content-r4/master/bundles/measure/"+t+"/"+t+"-bundle.json").then((function(e){return e.json()})).then((function(e){return s(t),D(e),fetch("https://api.github.com/repos/cqframework/ecqm-content-r4/contents/bundles/measure/".concat(t,"/").concat(t,"-files"))})).then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.name})).filter((function(e){return e.startsWith("tests")}));_(t)})).catch((function(e){return console.log("error: ",e)}))},onPatientDropdownChange:function(e){var t=e.target.value;fetch("https://raw.githubusercontent.com/DBCG/connectathon/master/fhir401/bundles/measure/".concat(r,"/").concat(r,"-files/").concat(t)).then((function(e){return e.json()})).then((function(e){F(e),h(t)}))},onECQMPatientDropdownChange:function(e){var t=e.target.value;fetch("https://raw.githubusercontent.com/cqframework/ecqm-content-r4/master/bundles/measure/".concat(r,"/").concat(r,"-files/").concat(t)).then((function(e){return e.json()})).then((function(e){F(e),h(t)}))},measureOptions:E,ecqmMeasureOptions:L,patientOptions:Q,ecqmPatientOptions:$,setPatientOptions:V,setECQMPatientOptions:_,showDropdowns:ne})})}),Object(a.jsx)(u.a,{container:!0,spacing:1,justify:"space-evenly",children:Object(a.jsx)(u.a,{container:!0,item:!0,xs:11,spacing:2,children:Object(a.jsx)(M,{setOutputType:le,outputType:oe,setMeasurementPeriodStart:he,measurementPeriodStart:de,setMeasurementPeriodEnd:me,measurementPeriodEnd:pe,setCalculationOptions:ve,calculationOptions:ge})})}),Object(a.jsxs)(u.a,{container:!0,justify:"flex-end",children:[Object(a.jsx)(U.a,{variant:"contained",onClick:function(){s(null),h(null),D(null),F(null),he(new Date("1/1/2019")),me(new Date("12/31/2019")),ve({calculateHTML:!1,calculateSDEs:!1,includeClauseResults:!1,includeHighlighting:!1,includePrettyResults:!1}),m(null),v([])},children:"Reset"}),Object(a.jsx)(U.a,{variant:"contained",color:"primary",onClick:function(){var e=Object(o.a)({measurementPeriodStart:null===de||void 0===de?void 0:de.toISOString(),measurementPeriodEnd:null===pe||void 0===pe?void 0:pe.toISOString()},ge);if("rawResults"===oe)m(J.Calculator.calculateRaw(y,[S],e));else if("detailedResults"===oe){var t=J.Calculator.calculate(y,[S],e);m(t);var n=[];if(null!==t&&!0===ge.calculateHTML){var a;for(a in t.results[0].detailedResults)void 0!==t.results[0].detailedResults&&n.push({groupId:t.results[0].detailedResults[a].groupId,html:t.results[0].detailedResults[a].html});v(n)}else v([])}else if("measureReports"===oe){var c=J.Calculator.calculateMeasureReports(y,[S],e),r=c.results;if(e.calculateHTML){var s=r.map((function(e){var t;return{groupId:e.id||"",html:(null===(t=e.text)||void 0===t?void 0:t.div)||""}}));v(s)}m(c)}else"gapsInCare"===oe&&m(J.Calculator.calculateGapsInCare(y,[S],e))},children:"Calculate"})]}),Object(a.jsxs)(u.a,{container:!0,children:[Object(a.jsx)(u.a,{container:!0,item:!0,xs:6,direction:"row",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Results:"}),p&&Object(a.jsx)(W.a,{src:p,enableClipboard:!0,theme:"shapeshifter:inverted",collapsed:2}),p&&Object(a.jsx)(U.a,{variant:"contained",color:"primary",onClick:function(){Y()(JSON.stringify(p),(null===r||void 0===r?void 0:r.includes(".json"))?"results-".concat(r):"results-".concat(r,".json"))},children:"Download"})]})}),Object(a.jsx)(u.a,{container:!0,item:!0,xs:6,direction:"row",children:g&&g.map((function(t){return Object(a.jsxs)("div",{className:e.highlightedMarkup,children:[Object(a.jsx)("h2",{children:"HTML:"}),z()(t.html)]},t.groupId)}))})]})]})})}var _=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1064)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)($,{})}),document.getElementById("root")),_()},205:function(e,t,n){},948:function(e,t){},950:function(e,t){}},[[1009,1,2]]]);
//# sourceMappingURL=main.a91f6671.chunk.js.map