(this["webpackJsonpfqm-execution-demo"]=this["webpackJsonpfqm-execution-demo"]||[]).push([[0],{1009:function(e,t,n){"use strict";n.r(t);var a=n(18),c=n(0),r=n.n(c),s=n(44),i=n.n(s),o=(n(205),n(85)),l=n(59),u=n(1053),j=n(1048),d=n(1059),h=n(1056),b=n(1046),O=n(1047),p=n(1042);function m(e){return Object(a.jsx)(p.a,{component:"fieldset",children:Object(a.jsxs)(b.a,{name:"type",value:e.outputType,onChange:function(t){e.setOutputType(t.target.value)},children:[Object(a.jsx)(O.a,{control:Object(a.jsx)(h.a,{color:"primary"}),value:"rawResults",label:"Raw"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(h.a,{color:"primary"}),value:"detailedResults",label:"Detailed"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(h.a,{color:"primary"}),value:"measureReports",label:"Measure Reports"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(h.a,{color:"primary"}),value:"gapsInCare",label:"Gaps In Care"})]})})}var f=n(141),x=n(1011),g=n(1058);function C(e){var t=function(t){e.setCalculationOptions(Object(o.a)(Object(o.a)({},e.calculationOptions),{},Object(f.a)({},t.target.name,t.target.checked)))};return Object(a.jsxs)(x.a,{children:[Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.includeClauseResults,onChange:t,name:"includeClauseResults",color:"primary"}),label:"Include Clause Results"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.includePrettyResults,onChange:t,name:"includePrettyResults",color:"primary"}),label:"Include Pretty Results"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.includeHighlighting,onChange:t,name:"includeHighlighting",color:"primary"}),label:"Include Highlighting"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.calculateSDEs,onChange:t,name:"calculateSDEs",color:"primary"}),label:"Calculate SDEs"}),Object(a.jsx)(O.a,{control:Object(a.jsx)(g.a,{checked:e.calculationOptions.calculateHTML,onChange:t,name:"calculateHTML",color:"primary"}),label:"Calculate HTML"})]})}var v=n(842),y=n(56),M=n(1054);function D(e){return Object(a.jsx)(y.a,{utils:v.a,children:Object(a.jsx)(M.a,{value:e.measurementPeriodDate,format:"MM/dd/yyyy",onChange:e.setMeasurementPeriodDate})})}function P(e){return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsxs)(u.a,{item:!0,xs:4,children:[Object(a.jsx)("h3",{children:"Output Type:"}),Object(a.jsx)(m,{setOutputType:e.setOutputType,outputType:e.outputType})]}),Object(a.jsxs)(u.a,{item:!0,xs:4,children:[Object(a.jsx)("h3",{children:"Calculation Options:"}),Object(a.jsx)(C,{setCalculationOptions:e.setCalculationOptions,calculationOptions:e.calculationOptions})]}),Object(a.jsxs)(u.a,{item:!0,xs:4,children:[Object(a.jsx)("h3",{children:"Measurement Start: "}),Object(a.jsx)(D,{setMeasurementPeriodDate:e.setMeasurementPeriodStart,measurementPeriodDate:e.measurementPeriodStart}),Object(a.jsx)("h3",{children:"Measurement End: "}),Object(a.jsx)(D,{setMeasurementPeriodDate:e.setMeasurementPeriodEnd,measurementPeriodDate:e.measurementPeriodEnd})]})]})}var R=n(833),S=n(843),w=n(835);function F(){var e=Object(R.a)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-radius: 2px;\n  border-color: ",";\n  border-style: dashed;\n  background-color: #fafafa;\n  color: #7f7f7f;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n"]);return F=function(){return e},e}var N=w.a.div(F(),(function(e){return function(e){return e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isDragActive?"#2196f3":"#eeeeee"}(e)})),k=function(e){var t=e.onDrop,n=Object(S.a)({onDrop:t,accept:".json"}),c=n.getRootProps,r=n.getInputProps,s=n.isDragActive,i=n.isDragAccept,l=n.isDragReject;return Object(a.jsx)(u.a,{item:!0,xs:12,children:Object(a.jsxs)(N,Object(o.a)(Object(o.a)({},c({className:"dropzone",isDragActive:s,isDragAccept:i,isDragReject:l})),{},{children:[Object(a.jsx)("input",Object(o.a)({},r())),Object(a.jsx)("p",{children:"Drag and drop file here, or click to select file"})]}))})},E=n(1055),T=n(1062),I=Object(j.a)((function(e){return Object(d.a)({root:{width:"100%"}})}));function q(e){var t=I();return Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)(p.a,{className:t.root,children:Object(a.jsx)(E.a,{value:e.selectedValue,onChange:e.handleChange,children:e.options.map((function(e){return Object(a.jsx)(T.a,{value:e,children:e},e)}))})})})}var H=n(1013),L=n(197),Q=n.n(L),A=Object(j.a)((function(e){return Object(d.a)({root:{color:"#3f51b5"}})}));function B(e){var t=A();return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsxs)(u.a,{item:!0,xs:6,children:[Object(a.jsx)("h2",{children:"Measure Bundle: "}),null!==e.measureFileName&&Object(a.jsx)("h3",{children:"Current Measure Bundle:"}),null!==e.measureFileName&&Object(a.jsxs)(u.a,{container:!0,children:[Object(a.jsxs)("h3",{className:t.root,children:[" ",e.measureFileName]}),null!==e.measureFileName&&Object(a.jsx)(H.a,{"aria-label":"delete",onClick:function(){e.setMeasureFileName(null),e.setPatientOptions([]),e.setECQMPatientOptions([]),e.setPatientFileName(null)},children:Object(a.jsx)(Q.a,{})})]}),Object(a.jsx)("h4",{children:"Upload From File System:"}),Object(a.jsx)(k,{onDrop:e.onMeasureUpload})," ",Object(a.jsx)("h4",{children:"OR Select From Connectathon Repository:"}),Object(a.jsx)(q,{selectedValue:e.measureFileName||"",options:e.measureOptions,handleChange:e.onMeasureDropdownChange}),Object(a.jsx)("h4",{children:"OR Select From eCQM Measure Content Repository:"}),Object(a.jsx)(q,{selectedValue:e.measureFileName||"",options:e.ecqmMeasureOptions,handleChange:e.onECQMMeasureDropdownChange})]}),Object(a.jsxs)(u.a,{item:!0,xs:6,children:[Object(a.jsx)("h2",{children:"Patient Bundle: "}),null!==e.patientFileName&&Object(a.jsx)("h3",{children:"Current Patient Bundle:"}),null!==e.patientFileName&&Object(a.jsxs)(u.a,{container:!0,children:[Object(a.jsxs)("h3",{className:t.root,children:[" ",e.patientFileName]})," ",null!==e.patientFileName&&Object(a.jsx)(H.a,{"aria-label":"delete",onClick:function(){e.setPatientFileName(null)},children:Object(a.jsx)(Q.a,{})})]}),Object(a.jsx)("h4",{children:"Upload From File System:"}),Object(a.jsx)(k,{onDrop:e.onPatientUpload})," ",Object(a.jsx)("h4",{children:"OR Select From Connectathon Repository:"}),Object(a.jsx)(q,{selectedValue:e.patientFileName||"",options:e.patientOptions,handleChange:e.onPatientDropdownChange}),Object(a.jsx)("h4",{children:"OR Select From eCQM Measure Content Repository:"}),Object(a.jsx)(q,{selectedValue:e.patientFileName||"",options:e.ecqmPatientOptions,handleChange:e.onECQMPatientDropdownChange})]})]})}var U=n(1050),J=n(124),V=n(839),G=n.n(V),W=n(840),z=n.n(W),K=n(841),X=n.n(K),Y=Object(j.a)((function(e){return Object(d.a)({root:{display:"flex-grow",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},formControl:{margin:e.spacing(1)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},container:{display:"flex-grow"},highlightedMarkup:{"& pre":{whiteSpace:"pre-wrap"}}})}));function Z(){var e=Y(),t=Object(c.useState)(null),n=Object(l.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(null),j=Object(l.a)(i,2),d=j[0],h=j[1],b=Object(c.useState)(null),O=Object(l.a)(b,2),p=O[0],m=O[1],f=Object(c.useState)([]),x=Object(l.a)(f,2),g=x[0],C=x[1],v=Object(c.useState)(null),y=Object(l.a)(v,2),M=y[0],D=y[1],R=Object(c.useState)(null),S=Object(l.a)(R,2),w=S[0],F=S[1],N=Object(c.useState)([]),k=Object(l.a)(N,2),E=k[0],T=k[1],I=Object(c.useState)([]),q=Object(l.a)(I,2),H=q[0],L=q[1],Q=Object(c.useState)([]),A=Object(l.a)(Q,2),V=A[0],W=A[1],K=Object(c.useState)([]),Z=Object(l.a)(K,2),$=Z[0],_=Z[1],ee=Object(c.useCallback)((function(e){var t=e[0],n=new FileReader;n.onload=function(){s(t.path),D(JSON.parse(n.result))},n.readAsText(t)}),[]),te=Object(c.useCallback)((function(e){var t=e[0],n=new FileReader;n.onload=function(){h(t.path),F(JSON.parse(n.result))},n.readAsText(t)}),[]),ne=Object(c.useState)("raw"),ae=Object(l.a)(ne,2),ce=ae[0],re=ae[1],se=Object(c.useState)(new Date("1/1/2019")),ie=Object(l.a)(se,2),oe=ie[0],le=ie[1],ue=Object(c.useState)(new Date("12/31/2019")),je=Object(l.a)(ue,2),de=je[0],he=je[1],be=Object(c.useState)({calculateHTML:!1,calculateSDEs:!1,includeClauseResults:!1,includeHighlighting:!1,includePrettyResults:!1}),Oe=Object(l.a)(be,2),pe=Oe[0],me=Oe[1];return Object(c.useEffect)((function(){fetch("https://api.github.com/repos/dbcg/connectathon/contents/fhir401/bundles/measure").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.name}));T(t)}))}),[]),Object(c.useEffect)((function(){fetch("https://api.github.com/repos/cqframework/ecqm-content-r4/contents/bundles/measure").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.name}));L(t)}))}),[]),Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)("h1",{id:"header",children:"FQM Execution Demo"}),Object(a.jsx)(u.a,{container:!0,justify:"space-evenly",children:Object(a.jsx)(u.a,{container:!0,item:!0,xs:11,spacing:2,alignItems:"center",children:Object(a.jsx)(B,{onMeasureUpload:ee,onPatientUpload:te,measureFileName:r,setMeasureFileName:s,patientFileName:d,setPatientFileName:h,onMeasureDropdownChange:function(e){var t=e.target.value;fetch("https://raw.githubusercontent.com/DBCG/connectathon/master/fhir401/bundles/measure/"+t+"/"+t+"-bundle.json").then((function(e){return e.json()})).then((function(e){return s(t),D(e),fetch("https://api.github.com/repos/dbcg/connectathon/contents/fhir401/bundles/measure/".concat(t,"/").concat(t,"-files"))})).then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.name})).filter((function(e){return e.startsWith("tests")}));W(t),_([])})).catch((function(e){return console.log("error: ",e)}))},onECQMMeasureDropdownChange:function(e){var t=e.target.value;fetch("https://raw.githubusercontent.com/cqframework/ecqm-content-r4/master/bundles/measure/"+t+"/"+t+"-bundle.json").then((function(e){return e.json()})).then((function(e){return s(t),D(e),fetch("https://api.github.com/repos/cqframework/ecqm-content-r4/contents/bundles/measure/".concat(t,"/").concat(t,"-files"))})).then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return e.name})).filter((function(e){return e.startsWith("tests")}));_(t)})).catch((function(e){return console.log("error: ",e)}))},onPatientDropdownChange:function(e){var t=e.target.value;fetch("https://raw.githubusercontent.com/DBCG/connectathon/master/fhir401/bundles/measure/".concat(r,"/").concat(r,"-files/").concat(t)).then((function(e){return e.json()})).then((function(e){F(e),h(t)}))},onECQMPatientDropdownChange:function(e){var t=e.target.value;fetch("https://raw.githubusercontent.com/cqframework/ecqm-content-r4/master/bundles/measure/".concat(r,"/").concat(r,"-files/").concat(t)).then((function(e){return e.json()})).then((function(e){F(e),h(t)}))},measureOptions:E,ecqmMeasureOptions:H,patientOptions:V,ecqmPatientOptions:$,setPatientOptions:W,setECQMPatientOptions:_})})}),Object(a.jsx)(u.a,{container:!0,spacing:1,justify:"space-evenly",children:Object(a.jsx)(u.a,{container:!0,item:!0,xs:11,spacing:2,children:Object(a.jsx)(P,{setOutputType:re,outputType:ce,setMeasurementPeriodStart:le,measurementPeriodStart:oe,setMeasurementPeriodEnd:he,measurementPeriodEnd:de,setCalculationOptions:me,calculationOptions:pe})})}),Object(a.jsxs)(u.a,{container:!0,justify:"flex-end",children:[Object(a.jsx)(U.a,{variant:"contained",onClick:function(){s(null),h(null),D(null),F(null),le(new Date("1/1/2019")),he(new Date("12/31/2019")),me({calculateHTML:!1,calculateSDEs:!1,includeClauseResults:!1,includeHighlighting:!1,includePrettyResults:!1}),m(null),C([])},children:"Reset"}),Object(a.jsx)(U.a,{variant:"contained",color:"primary",onClick:function(){var e=Object(o.a)({measurementPeriodStart:null===oe||void 0===oe?void 0:oe.toISOString(),measurementPeriodEnd:null===de||void 0===de?void 0:de.toISOString()},pe);if("rawResults"===ce)m(J.Calculator.calculateRaw(M,[w],e));else if("detailedResults"===ce){var t=J.Calculator.calculate(M,[w],e);m(t);var n=[];if(null!==t&&!0===pe.calculateHTML){var a;for(a in t.results[0].detailedResults)void 0!==t.results[0].detailedResults&&n.push({groupId:t.results[0].detailedResults[a].groupId,html:t.results[0].detailedResults[a].html});C(n)}else C([])}else if("measureReports"===ce){var c=J.Calculator.calculateMeasureReports(M,[w],e),r=c.results;if(e.calculateHTML){var s=r.map((function(e){var t;return{groupId:e.id||"",html:(null===(t=e.text)||void 0===t?void 0:t.div)||""}}));C(s)}m(c)}else"gapsInCare"===ce&&m(J.Calculator.calculateGapsInCare(M,[w],e))},children:"Calculate"})]}),Object(a.jsxs)(u.a,{container:!0,children:[Object(a.jsx)(u.a,{container:!0,item:!0,xs:6,direction:"row",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Results:"}),p&&Object(a.jsx)(G.a,{src:p,enableClipboard:!0,theme:"shapeshifter:inverted",collapsed:2}),p&&Object(a.jsx)(U.a,{variant:"contained",color:"primary",onClick:function(){X()(JSON.stringify(p),(null===r||void 0===r?void 0:r.includes(".json"))?"results-".concat(r):"results-".concat(r,".json"))},children:"Download"})]})}),Object(a.jsx)(u.a,{container:!0,item:!0,xs:6,direction:"row",children:g&&g.map((function(t){return Object(a.jsxs)("div",{className:e.highlightedMarkup,children:[Object(a.jsx)("h2",{children:"HTML:"}),z()(t.html)]},t.groupId)}))})]})]})})}var $=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1064)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Z,{})}),document.getElementById("root")),$()},205:function(e,t,n){},948:function(e,t){},950:function(e,t){}},[[1009,1,2]]]);
//# sourceMappingURL=main.62c0cfd4.chunk.js.map